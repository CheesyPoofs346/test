<!DOCTYPE html>
<html>
<head>
<title>Moving Popup</title>
<style>
body {
  margin: 0;
}
</style>
</head>
<body>

<div id="popup">
  This is a popup that moves randomly! <button onclick="window.close()">Close</button>
</div>

<script>
const popupElement = document.getElementById('popup');
let x = 50;
let y = 50;
let dx = 5; // Increased initial speed
let dy = 5; // Increased initial speed
let maxX;
let maxY;
let initialMove = true;

function updatePopupPosition() {
  maxX = window.innerWidth - popupElement.offsetWidth;
  maxY = window.innerHeight - popupElement.offsetHeight;

  x += dx;
  y += dy;

    // More pronounced bouncing with some randomness
    if (x + popupElement.offsetWidth > maxX || x < 0) {
      dx = -dx * 1.1; // Reverse and increase speed slightly
      dx += (Math.random() - 0.5) * 4; // More randomness in x direction
    }
    if (y + popupElement.offsetHeight > maxY || y < 0) {
      dy = -dy * 1.1; // Reverse and increase speed slightly
      dy += (Math.random() - 0.5) * 4; // More randomness in y direction
    }

  // More frequent random direction changes with larger adjustments
    if (Math.random() < 0.05) { // 5% chance to change direction
        dx += (Math.random() - 0.5) * 10; // Larger random change
        dy += (Math.random() - 0.5) * 10; // Larger random change
    }

  // Limit speed (important!)
    dx = Math.max(-10, Math.min(10, dx));
    dy = Math.max(-10, Math.min(10, dy));


  if (initialMove) {
    window.moveTo(x, y);
    initialMove = false;
  } else {
    window.moveTo(x, y);
  }

  requestAnimationFrame(updatePopupPosition);
}

updatePopupPosition();
</script>

</body>
</html>
