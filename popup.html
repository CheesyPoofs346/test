<!DOCTYPE html>
<html>
<head>
<title>Moving Popup</title>
<style>
body {
  margin: 0;
}
</style>
</head>
<body>

<div id="popup">
  This is a popup that moves randomly! <button onclick="window.close()">Close</button>
</div>

<script>
const numPopups = 5; // Number of popups to open
const popups = []; // Array to store popup window objects

function openMovingPopup() {
  const popup = window.open('popup.html', 'movingPopup', 'width=300,height=200');
  popups.push(popup); // Add the new popup to the array
}

for (let i = 0; i < numPopups; i++) {
  openMovingPopup(); // Open multiple popups
}


// Code for popup.html (separate file)
// ------------------------------------

// In popup.html:
// ... (rest of the HTML code for popup.html)

const popupElement = document.getElementById('popup');
let x = 50;
let y = 50;
let dx = 2;
let dy = 2;
let maxX;
let maxY;
let initialMove = true;


function updatePopupPosition() {
  maxX = window.innerWidth - popupElement.offsetWidth;
  maxY = window.innerHeight - popupElement.offsetHeight;

  x += dx;
  y += dy;

  if (x + popupElement.offsetWidth > maxX || x < 0) {
    dx = -dx;
    dx += (Math.random() - 0.5) * 2;
  }
  if (y + popupElement.offsetHeight > maxY || y < 0) {
    dy = -dy;
    dy += (Math.random() - 0.5) * 2;
  }

  if (Math.random() < 0.02) {
    dx += (Math.random() - 0.5) * 4;
    dy += (Math.random() - 0.5) * 4;
  }

  dx = Math.max(-5, Math.min(5, dx));
  dy = Math.max(-5, Math.min(5, dy));


  if (initialMove) {
    window.moveTo(x, y);
    initialMove = false;
  } else {
    window.moveTo(x, y);
  }

  requestAnimationFrame(updatePopupPosition);
}

updatePopupPosition();

</script>

</body>
</html>
